/* Overlay */
.envelope-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,0.46);
  z-index:120;
  padding:28px;
}

.envelope{
  --w:320px;
  --h:200px;
  position:relative;
  width:var(--w);
  height:var(--h);
  background:linear-gradient(180deg,#fffefa,#fff7f2);
  border-radius:12px;
  border:1px solid rgba(0,0,0,0.06);
  box-shadow:0 18px 40px rgba(10,10,10,0.18);
  padding:14px;
  display:block;
  cursor:pointer;
  outline:none;
  -webkit-tap-highlight-color: transparent;
  transition: transform 260ms ease, box-shadow 260ms ease;
}

.envelope .flap{
  position:absolute;
  left:0;right:0;top:0;
  height:50%;
  background:linear-gradient(180deg,#f0e0d6,#e7cdbf);
  border-top-left-radius:12px;
  border-top-right-radius:12px;
  transform-origin:center top;
  transform:rotateX(0deg);
  transition:transform 700ms cubic-bezier(.2,.95,.2,1);
  z-index:14;
}

.envelope .flap::after{
  content:"";
  position:absolute;
  left:50%;
  bottom:-6px;
  transform:translateX(-50%);
  width:0;height:0;border-left:18px solid transparent;border-right:18px solid transparent;border-top:12px solid rgba(0,0,0,0.03);
}

.envelope .body{
  position:relative;
  height:100%;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  overflow:hidden;
}
.letter{
  width:92%;
  background:transparent;
  border-radius:8px;
  padding:6px 10px 14px;
  box-shadow:none;
  transform:translateY(0%);
}

.letter-svg{display:block;width:100%;height:auto;border-radius:8px}

.letter-art{
  width:100%;
  height:auto;
  display:block;
  border-radius:8px;
  box-shadow:0 10px 28px rgba(10,10,10,0.12);
}

.envelope.opened .flap{
  transform:rotateX(-180deg);
}

/* keep the letter visible when opened so we can show the internal menu */
.letter{
  width:92%;
  background:#fff;
  border-radius:8px;
  padding:18px;
  box-shadow:0 10px 28px rgba(10,10,10,0.12);
  transform:translateY(0%);
  transition: transform 420ms cubic-bezier(.2,.95,.2,1), opacity 300ms ease;
}

.envelope.opened .letter{
  transform: translateY(-6%);
  opacity: 1;
}

/* internal menu styles inside the letter */
.letter-menu{position:absolute;left:50%;top:50%;transform:translate(-50%,-10%);display:none;flex-direction:column;align-items:center;gap:8px}
.letter-menu.visible{display:flex}
.letter-menu nav{display:flex;gap:10px}
.letter-menu a{color:var(--muted);text-decoration:none;padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.6);backdrop-filter:blur(2px);border:1px solid rgba(0,0,0,0.03)}
.letter-menu a:hover{color:var(--accent)}
.letter-menu .btn{padding:8px 12px;border-radius:8px}

/* image stack and fade */
.img-stack{position:relative;width:100%;height:auto}
.envelope-art{display:block;width:100%;height:auto;border-radius:8px;transition:opacity 420ms ease, transform 420ms ease;position:relative}
.envelope-art.hidden{opacity:0;pointer-events:none;position:absolute;left:0;top:0}
.envelope-art.visible{opacity:1;position:relative}
.envelope.opened .envelope-art.closed{opacity:0}
.envelope.opened .envelope-art.open{opacity:1}

.letter-inner{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:6px}
.letter-inner h2{margin:0;font-size:1.05rem}
.letter-inner p{margin:0;color:var(--muted)}

.envelope h2{margin:0;font-size:1.1rem;text-align:center}
.envelope p{margin:6px 0 0 0;text-align:center;color:rgba(0,0,0,0.6)}
.open-note{margin-top:10px;font-size:0.85rem;color:rgba(0,0,0,0.5);text-align:center}

.open-note{font-style:italic}

.seal{position:absolute;left:50%;top:38px;width:56px;height:56px;transform:translateX(-50%) translateY(-6px);z-index:20;pointer-events:none}

.seal svg{filter:drop-shadow(0 8px 12px rgba(0,0,0,0.18))}

.hint{position:absolute;bottom:28px;color:var(--muted);font-weight:700;opacity:0.9}

/* small responsive adjustments */
@media (max-width:480px){
  .envelope{--w:92%;--h:190px}
  .hint{bottom:18px;font-size:0.9rem}
}

@media (min-width:900px){
  .envelope{--w:520px;--h:320px}
  .letter-svg{text-anchor:middle}
}
